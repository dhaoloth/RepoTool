# RepoTool — Документация и восстановление проектов

**RepoTool** — это инструмент для генерации Markdown-документации из исходников проекта и восстановления проекта обратно из `.md` файла.  
Главная цель — простота и интеграция с Windows (контекстное меню), при этом доступен CLI-режим для автоматизации.

## Основные возможности

- **Два режима работы**:
  1. **Генерация**: создаёт `.md` файл со структурой проекта (ASCII-дерево) и содержимым всех текстовых файлов.
  2. **Восстановление**: по `.md` файлу восстанавливает структуру и содержимое проекта.
- **Поддержка популярных форматов**:
  - Текстовые: `.py`, `.js/.jsx`, `.ts/.tsx`, `.vue`, `.json`, `.yaml`, `.toml`, `.ini`, `.html`, `.css` и др.
  - Автоопределение текста/бинарника (бинарные можно опционально сохранять в `assets.zip`).
- **Структура проекта в виде дерева**:
  ```text
  project/
  ├── src/
  │   ├── App.tsx
  │   └── index.tsx
  └── package.json
````

* **Игнорирование служебных директорий**: `.git`, `node_modules`, `dist`, `build`, `venv` и др.
* **Пользовательские правила**: через `.repotoolignore` (поддержка масок `*.ext`, `dir/*`, подстрок).
* **Кодировки**: автоматическая обработка UTF-8, UTF-16, CP1251, fallback с заменами.
* **CLI-режим**:

  ```bash
  RepoTool.exe --mode generate --path <папка> --out <docs.md> --zip-binaries
  RepoTool.exe --mode restore  --path <docs.md> --out <папка>
  ```
* **Интеграция с Windows**: через `setup_menu.reg`.

## Установка

1. Сохраните `RepoTool.py`.
2. Соберите `.exe`:

   ```bash
   pip install pyinstaller
   pyinstaller --onefile --noconsole RepoTool.py
   ```

   Готовый файл будет в `dist/RepoTool.exe`.
3. Скопируйте `.exe` в удобное место, например:

   ```
   C:\Program Files\RepoTool\RepoTool.exe
   ```
4. Подготовьте и примените `setup_menu.reg` (путь к `.exe` замените на свой).

## Использование

### Через контекстное меню Windows (интерактивно)
- **Создать документацию**: ПКМ на папке проекта → «Создать документацию проекта».  
  Откроется окно «Сохранить как…», где вы выберете место и имя `*.md`. Опционально можно включить упаковку бинарных файлов (`assets.zip`).
- **Восстановить проект**: ПКМ на `..._documentation.md` → «Восстановить проект из документации».  
  Откроется окно выбора папки, куда будет развернут проект (в подпапку с именем проекта).

### Через CLI (автоматизация)
```bash
RepoTool.exe --mode generate --path D:\work\proj --out D:\docs\proj.md --zip-binaries
RepoTool.exe --mode restore  --path D:\docs\proj.md --out D:\restore\proj

  * Генерация:

    ```bash
    RepoTool.exe --mode generate --path D:\work\myproj --out D:\docs\myproj.md --zip-binaries
    ```
  * Восстановление:

    ```bash
    RepoTool.exe --mode restore --path D:\docs\myproj.md --out D:\restore\myproj
    ```

## Дополнительно

* **Бинарные файлы**: при генерации можно включить ключ `--zip-binaries`, тогда они попадут в архив `assets.zip`.
  При восстановлении архив будет автоматически распакован.